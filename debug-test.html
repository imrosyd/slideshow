<!DOCTYPE html>
<html>
  <head>
    <title>Video Loop Test</title>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@19.0.2"> </script>
    <style>
      body {
        background-color: #111;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif, system-ui, ui-serif, "Apple Color Emoji", "Segoe UI"}, sans-serif");
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        color: white;
        padding: 20px;
      }
      </style>
  </head>
  <body>
    <div id="app">
      <h2>Video Loop Test</h2>
      <div id="video-container">
        <video
          id="test-video"
          style={{ 
            width: 800px; 
            height: 450px;
            backgroundColor: #000;
          }}
          src=""
          muted
          autoplay
          loop={true}
        >
      </video>
      
      </div>

      <div id="logs">
        <h3>Video Logs</h3>
        <pre id="logs-content"></pre>
        <button onclick="clearLogs()">Clear Logs</button>
      </div>
    </div>

    <script type="module">
      // Connect to Supabase channel for live updates
      const supabase = createClient(
        process.env.NEXT_PUBLIC_SUPABASE_URL!,
        process.env.SUPABASE_SERVICE_ROLE_KEY!
      );

      const updateCurrentSlide = (channel: string, videoStatus: boolean) => {
        console.log(`[Real-time] Video state changed to: ${videoStatus}`);
      };

      const channel = supabase.channel('main-slideshow-status');
      channel.on('broadcast', (payload) => {
        updateCurrentSlide(payload.current_slide);
      });

      return () => {
        supabase.removeChannel(channel);
      };
    });
    </script>
    </body>
  </body>
</html>
